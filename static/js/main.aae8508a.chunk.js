(this["webpackJsonpfile-upload"]=this["webpackJsonpfile-upload"]||[]).push([[0],[,,,,,function(e,t,n){e.exports={file:"file-item_file__xHUHR",delete:"file-item_delete__XJFQe",container:"file-item_container__29tN9",content:"file-item_content__mc-AD",data:"file-item_data__xHcMa",name:"file-item_name__2MpHa",meta:"file-item_meta__192_B",size:"file-item_size__2XJ-6",loaded:"file-item_loaded__2a1cw",controls:"file-item_controls__z-inr",progressBar:"file-item_progressBar__3E6_g",dragging:"file-item_dragging__3IJP2",dragHover:"file-item_dragHover__3g4uB"}},,function(e,t,n){e.exports={item:"suggest-item_item__3XogB",shadow:"suggest-item_shadow__3dXFD",disabled:"suggest-item_disabled__JxDw9",bg:"suggest-item_bg__33vA5",content:"suggest-item_content__1iFkT",amount:"suggest-item_amount__nzTV4",count:"suggest-item_count__22Uz-",ghost:"suggest-item_ghost__3GJGY"}},,,,,function(e,t,n){e.exports={type:"file-type_type__2t-Oa",delete:"file-type_delete__1i7vv",loading:"file-type_loading__DOPjq",text:"file-type_text__2Aoc-",textBlock:"file-type_textBlock__21cMk",bg:"file-type_bg__2yeUP"}},function(e,t,n){e.exports={container:"form_container__3tU_K",filesColumn:"form_filesColumn__1zW9n",files:"form_files__2wYJL",suggestColumn:"form_suggestColumn__3YT_r",footer:"form_footer__3_2Ir"}},,function(e,t,n){e.exports={container:"button_container__1weSt",disabled:"button_disabled__vZgGL",button:"button_button__H5057",shadow:"button_shadow__E4Pjk"}},function(e,t,n){e.exports={dropZone:"dropzone_dropZone__1DIbv",disabled:"dropzone_disabled__fstAA",dragging:"dropzone_dragging__bsVAz"}},,function(e,t,n){e.exports={list:"suggest-list_list__21Hjo",title:"suggest-list_title__xp7Zs"}},function(e,t,n){e.exports={main:"App_main__uN9ca",ghLink:"App_ghLink__1_42N"}},,,,function(e,t,n){e.exports={"files-list":"files-list_files-list__Gb-Gw"}},,,,,,,function(e,t,n){},,,,,function(e,t,n){"use strict";n.r(t);var a,i=n(1),r=n(0),c=n.n(r),o=n(20),s=n.n(o),l=(n(30),n(8)),u=n(4),d=n(9),b=n(2),j=n(37);!function(e){e[e.LOADING=0]="LOADING",e[e.UPLOADED=1]="UPLOADED",e[e.ERROR=2]="ERROR"}(a||(a={}));var f=n(24),O=n(6),p=n.n(O),m=n(16),g=n.n(m),_=function(e){var t,n=e.onDrop,a=e.disabled,r=Object(f.a)({onDrop:n,disabled:a}),c=r.getInputProps,o=r.getRootProps,s=r.isDragActive;return Object(i.jsxs)("div",Object(u.a)(Object(u.a)({},o()),{},{className:p()(g.a.dropZone,(t={},Object(b.a)(t,g.a.disabled,a),Object(b.a)(t,g.a.dragging,s),t)),children:[Object(i.jsx)("input",Object(u.a)({},c())),"Press or drop files here"]}))},v=n(18),x=n.n(v),h=n(7),y=n.n(h);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var N=r.createElement("path",{d:"M7.0624 13.9998C6.8084 13.9998 6.5544 13.9038 6.3594 13.7118L2.2974 9.71075C1.9044 9.32275 1.9004 8.68975 2.2884 8.29675C2.6764 7.90375 3.3094 7.90075 3.7024 8.28875L7.0554 11.5878L14.2904 4.29375C14.6814 3.90375 15.3134 3.90175 15.7054 4.28975C16.0974 4.67975 16.0994 5.31275 15.7094 5.70475L7.7724 13.7048C7.5764 13.9008 7.3194 13.9998 7.0624 13.9998Z"});function E(e,t){var n=e.title,a=e.titleId,i=C(e,["title","titleId"]);return r.createElement("svg",D({viewBox:"0 0 18 18",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,N)}var L=r.forwardRef(E),k=(n.p,n(11)),w="ghost",A=function(e){var t=e.amount,n=Object(r.useRef)(t),a=t!==n.current,c=Object(k.b)({from:{x:0},x:a?1:0,config:{duration:400},reset:!0}).x;return Object(r.useEffect)((function(){n.current=t})),Object(i.jsxs)("div",{className:y.a.count,children:[Object(i.jsx)("div",{className:y.a.amount,children:t||Object(i.jsx)(L,{})}),Object(i.jsx)(k.a.div,{style:{transform:c.interpolate({range:[0,.3,1],output:[1,1.8,1]}).interpolate((function(e){return"scale(".concat(e,")")})),opacity:c.interpolate({range:[0,.2,1],output:t?[.2,.5,.2]:[.5,.7,.5]}).interpolate((function(e){return e}))},className:p()(y.a.bg)})]})},I=function(e){var t=e.label,n=e.data,a=e.amount,c=e.onDragStart,o=e.onDragEnd,s=Object(r.useCallback)((function(e){var a=document.createElement("div");a.id=w,a.innerText=t,a.className=y.a.ghost,document.body.appendChild(a);var i=a.getBoundingClientRect().width/2;e.dataTransfer.setData("fileType",n),e.dataTransfer.setDragImage(a,i,40),c()}),[t,n,c]),l=Object(r.useCallback)((function(){var e;null===(e=document.getElementById(w))||void 0===e||e.remove(),o()}),[o]);return Object(i.jsxs)("div",{className:p()(y.a.item,Object(b.a)({},y.a.disabled,!a)),draggable:Boolean(a),onDragStart:s,onDragEnd:l,children:[Object(i.jsxs)("div",{className:y.a.content,children:[Object(i.jsx)("div",{children:t}),Object(i.jsx)(A,{amount:a})]}),Object(i.jsx)("div",{className:y.a.shadow})]})},P=function(e){var t=e.items,n=e.onDragStart,a=e.onDragEnd,c=Object(r.useMemo)((function(){return t.map((function(e){var t=e.data,r=e.label,c=e.amount;return Object(i.jsx)(I,{data:t,label:r,amount:c,onDragStart:n,onDragEnd:a},t)}))}),[t,n,a]);return Object(i.jsxs)("div",{className:x.a.list,children:[Object(i.jsx)("div",{className:x.a.title,children:"Assign document type"}),c]})},S=n(22),F=n.n(S),R=n(5),z=n.n(R);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var G=r.createElement("path",{d:"M1.615 1.615C1.89358 1.33637 2.22432 1.11535 2.58833 0.96455C2.95234 0.813754 3.34249 0.736141 3.7365 0.736141C4.13051 0.736141 4.52066 0.813754 4.88467 0.96455C5.24868 1.11535 5.57942 1.33637 5.858 1.615L20 15.757L34.142 1.615C34.7047 1.05234 35.4678 0.736246 36.2635 0.736246C37.0592 0.736246 37.8223 1.05234 38.385 1.615C38.9477 2.17766 39.2638 2.94078 39.2638 3.7365C39.2638 4.53222 38.9477 5.29534 38.385 5.858L24.243 20L38.385 34.142C38.9477 34.7047 39.2638 35.4678 39.2638 36.2635C39.2638 37.0592 38.9477 37.8223 38.385 38.385C37.8223 38.9477 37.0592 39.2638 36.2635 39.2638C35.4678 39.2638 34.7047 38.9477 34.142 38.385L20 24.243L5.858 38.385C5.29534 38.9477 4.53222 39.2638 3.7365 39.2638C2.94078 39.2638 2.17766 38.9477 1.615 38.385C1.05234 37.8223 0.736246 37.0592 0.736246 36.2635C0.736246 35.4678 1.05234 34.7047 1.615 34.142L15.757 20L1.615 5.858C1.33637 5.57942 1.11535 5.24868 0.96455 4.88467C0.813754 4.52066 0.736141 4.13051 0.736141 3.7365C0.736141 3.34249 0.813754 2.95234 0.96455 2.58833C1.11535 2.22432 1.33637 1.89358 1.615 1.615V1.615Z"});function M(e,t){var n=e.title,a=e.titleId,i=T(e,["title","titleId"]);return r.createElement("svg",B({viewBox:"0 0 40 40",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,G)}var U,H,J,Z=r.forwardRef(M),X=(n.p,function(e){var t,n,c=e.id,o=e.name,s=e.size,l=e.status,u=e.loaded,j=void 0===u?0:u,f=e.type,O=e.onDrop,m=e.onDelete,g=e.isDragging,_=Object(r.useState)(!1),v=Object(d.a)(_,2),x=v[0],h=v[1],y=Object(r.useCallback)((function(){m(c)}),[m,c]);return Object(i.jsxs)("div",{className:p()(z.a.file,(t={},Object(b.a)(t,z.a.dragging,g),Object(b.a)(t,z.a.dragHover,x),Object(b.a)(t,z.a.loading,l===a.LOADING),t)),onDragEnter:function(){return h(!0)},onDragLeave:function(){return h(!1)},onDrop:function(e){h(!1),null===O||void 0===O||O(e)},children:[Object(i.jsx)("div",{className:z.a.container,children:Object(i.jsxs)("div",{className:z.a.content,children:[Object(i.jsxs)("div",{className:z.a.data,children:[Object(i.jsx)("div",{className:z.a.name,children:o}),Object(i.jsxs)("div",{className:z.a.meta,children:[Object(i.jsx)("div",{className:z.a.size,children:F()(s).toString()}),l===a.LOADING&&Object(i.jsxs)("div",{className:z.a.loaded,children:[j,"%"]}),f]})]}),Object(i.jsx)("div",{className:z.a.controls,children:Object(i.jsx)("div",{className:z.a.delete,onClick:y,children:Object(i.jsx)(Z,{})})})]})}),Object(i.jsx)("div",{className:p()(z.a.progressBar,(n={},Object(b.a)(n,z.a.fileDropable,g),Object(b.a)(n,z.a.fileDropHover,x),n)),style:{transform:"translateX(".concat(j-100,"%)")}})]})}),V=n(12),Y=n.n(V),q=function(e){var t=e.id,n=e.type,a=e.onDelete,c=Object(r.useRef)(n),o=n!==c.current,s=Object(k.b)({from:{x:0},x:o?1:0,config:{duration:300},reset:!0}).x,l=s.interpolate({range:[0,1],output:[0,-5]}).interpolate((function(e){return"".concat(e,"px")})),u=s.interpolate({range:[0,1],output:[-5,-15]}).interpolate((function(e){return"".concat(e,"px")}));Object(r.useEffect)((function(){c.current=n}));var d=Object(r.useCallback)((function(){a(t,n)}),[a,t,n]);return n?Object(i.jsxs)("div",{className:Y.a.type,children:[Object(i.jsxs)("div",{className:Y.a.textBlock,children:[Object(i.jsx)("div",{className:Y.a.text,children:re[n]}),Object(i.jsx)(k.a.div,{style:{top:l,bottom:l,left:u,right:u,opacity:s.interpolate({range:[0,0,1],output:[0,.5,0]}).interpolate((function(e){return e}))},className:p()(Y.a.bg)})]}),Object(i.jsx)("div",{className:Y.a.delete,onClick:d,children:Object(i.jsx)(Z,{})})]}):null},K=Object(r.memo)(q),Q=n(23),W=n.n(Q),$=function(e){var t=e.files,n=e.isDragging,a=e.onDeleteFile,r=e.onDeleteType,c=e.onAddType;return Object(i.jsx)("div",{className:W.a.filesList,children:t.map((function(e){return Object(i.jsx)(X,{id:e.id,name:e.name,size:e.size,status:e.status,type:Object(i.jsx)(K,{id:e.id,type:e.type,onDelete:r}),loaded:e.loaded,isDragging:n,onDrop:function(n){var a=n.dataTransfer.getData("fileType");if(a){var i=t.map((function(t){return t.id===e.id?Object(u.a)(Object(u.a)({},t),{},{type:a}):t}));c(i)}},onDelete:a},e.id)}))})},ee=n(13),te=n.n(ee),ne=n(15),ae=n.n(ne),ie=function(e){var t=e.children,n=e.disabled;return Object(i.jsxs)("div",{className:p()(ae.a.container,Object(b.a)({},ae.a.disabled,n)),children:[Object(i.jsx)("div",{className:ae.a.button,children:t}),Object(i.jsx)("div",{className:ae.a.shadow})]})};!function(e){e.passport="passport",e.snils="snils",e.contract="contract",e.legal="legal",e.application="application"}(J||(J={}));var re=(U={},Object(b.a)(U,J.passport,"Identity"),Object(b.a)(U,J.snils,"Building plan"),Object(b.a)(U,J.contract,"Contract"),Object(b.a)(U,J.legal,"Certificate"),Object(b.a)(U,J.application,"Application form"),U),ce=(H={},Object(b.a)(H,J.application,1),Object(b.a)(H,J.passport,2),Object(b.a)(H,J.snils,1),Object(b.a)(H,J.contract,1),Object(b.a)(H,J.legal,2),H),oe=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),s=Object(d.a)(o,2),f=s[0],O=s[1],p=Object(r.useState)(ce),m=Object(d.a)(p,2),g=m[0],v=m[1],x=Object(r.useMemo)((function(){return Object.entries(g).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return{label:re[n],data:n,amount:a}}))}),[g]),h=Object(r.useMemo)((function(){return Object.values(g).some((function(e){return e>0}))}),[g]),y=Object(r.useMemo)((function(){return f.some((function(e){return e.status===a.LOADING}))}),[f]),D=Object(r.useCallback)((function(e,t){O((function(n){return n.map((function(n){return n.id===t?Object(u.a)(Object(u.a)({},n),{},{loaded:Math.round(e.loaded/e.total*100)}):n}))}))}),[]),C=Object(r.useCallback)((function(e){var t=f.filter((function(t){return t.id!==e})),n=t.reduce((function(e,t){return t.type?Object(u.a)(Object(u.a)({},e),{},Object(b.a)({},t.type,e[t.type]-1)):e}),ce);O(t),v(n)}),[f]),N=Object(r.useCallback)((function(e,t){var n=f.map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{type:void 0}):t})),a=n.reduce((function(n,a){return t&&a.id===e?Object(u.a)(Object(u.a)({},n),{},Object(b.a)({},t,n[t]+1)):n}),g);O(n),v(a)}),[f,g]),E=Object(r.useCallback)((function(e){var t=e.reduce((function(e,t){return void 0===t.type?e:Object(u.a)(Object(u.a)({},e),{},Object(b.a)({},t.type,e[t.type]-1))}),ce);O(e),v(t)}),[]),L=function(e){var t=e.uploadService,n=e.onFileAdd,i=e.onFileUploaded,c=e.onFileUploadError,o=e.onFileReject,s=Object(r.useCallback)((function(e){o&&e.forEach((function(e){e.errors.forEach(o)}))}),[o]);return{handleDrop:Object(r.useCallback)((function(e){e.forEach((function(e){var r=Object(j.a)();null===n||void 0===n||n(e,r);var o={fileId:"",status:a.LOADING,meta:{originalFileName:e.name},blob:e};t.upload(e,r).then((function(e){o.status=a.UPLOADED,o.fileId=e.id||r,null===i||void 0===i||i(o,r)})).catch((function(e){o.status=a.ERROR,null===c||void 0===c||c(e,r)}))}))}),[n,i,c,t]),handleDropReject:s}}({uploadService:{upload:function(e,t){return new Promise((function(n){var a,i=0,r=e.size,c=Math.max(r/(15*Math.random()),1e4);!function e(){i<r?(D({loaded:i=c<r-i?i+c:r,total:r},t),a=window.setTimeout((function(){return requestAnimationFrame(e)}),100)):(clearTimeout(a),n({id:""}))}()}))}},onFileAdd:function(e,t){O((function(n){return[{id:t,name:e.name,status:a.LOADING,size:e.size}].concat(Object(l.a)(n))}))},onFileUploaded:function(e,t){O((function(n){return n.map((function(n){return n.id===t?Object(u.a)(Object(u.a)({},n),{},{status:e.status,id:e.fileId}):n}))}))},onFileUploadError:function(e,t){console.log(e,t)}}).handleDrop,k=Object(r.useCallback)((function(){return c(!0)}),[]),w=Object(r.useCallback)((function(){return c(!1)}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:te.a.container,children:[Object(i.jsxs)("div",{className:te.a.filesColumn,children:[Object(i.jsx)(_,{onDrop:L,disabled:n}),f.length>0&&Object(i.jsx)("div",{className:te.a.files,children:Object(i.jsx)($,{files:f,isDragging:n,onAddType:E,onDeleteFile:C,onDeleteType:N})})]}),Object(i.jsx)("div",{className:te.a.suggestColumn,children:Object(i.jsx)(P,{items:x,onDragStart:k,onDragEnd:w})})]}),Object(i.jsx)("div",{className:te.a.footer,children:Object(i.jsx)(ie,{disabled:h||y,children:"Next"})})]})},se=n(19),le=n.n(se),ue=function(){return Object(i.jsxs)("div",{className:le.a.main,children:[Object(i.jsxs)("div",{className:le.a.ghLink,children:[Object(i.jsx)("span",{children:"Check this project on "}),Object(i.jsx)("a",{href:"https://github.com/dmitryrodnikov/file-upload-concept",children:"GitHub"})]}),Object(i.jsx)("h1",{children:"Upload documents"}),Object(i.jsx)(oe,{})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))};s.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(ue,{})}),document.getElementById("root")),de()}],[[35,1,2]]]);
//# sourceMappingURL=main.aae8508a.chunk.js.map